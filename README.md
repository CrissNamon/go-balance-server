### Задача

Необходимо реализовать микросервис для работы с балансом пользователей (зачисление средств, списание средств, перевод средств от пользователя к пользователю, а также метод получения баланса пользователя). Сервис должен предоставлять HTTP API и принимать/отдавать запросы/ответы в формате JSON. 

### Запуск
Для развертывания dev-среды в Docker перейдите в папку с проектом и выполните:

````bash
docker-compose up --build
````

В результате будет создано Docker приложение с 2-мя контейнерами:

- Postgres с созданными БД (Основная и тестовая)
- Контейнер с приложением

При запуске приложения будут выполнены тесты.

### Запросы

Приложение принимает и отдает запросы в формате JSON. В репозитории содержится файл `balance-server.postman_collection.json` - коллекция с запросами для Postman.

Ответ сервиса всегда содержит следующие поля:

* status (Статус запроса, целое положительное число)
    - 0 = Запрос успешно выполнен
    - Не 0 = Произошла ошибка
* data (Ответ сервиса)
    - Может быть любого типа в зависимости от запроса


Сервис принимает запросы на endpoint'ы:

* GET /balance (Баланс пользоввателя)
    - Обязательные
        - id (ID пользователя, целое число > 0)
    - Необязательные
        - currency (Валюта для конвертации, код из 3 символов)
    - Пример запроса
        > {"id": 1, "currency": "USD"}
        
    - Пример ответа
        > {"status":0,"data":1060}
* POST /transaction (Списание/Зачисление средств)
    - Обязательные
        - id (ID пользователя для списания/зачисления)
        - sum (Сумма платежа, вещественное число. Если отрицательное -> списание, положительное -> зачисление)
    - Необязательные
        - desc (Описание платежа, текст)
    - Пример запроса
        > {"id": 1, "sum": 51.7, "desc": "Random income"}
        
    - Пример ответа
        > {"status":0,"data":"Transaction completed"}
* POST /transfer (Перевод средств между пользователями)
    - Обязательные
        - id (ID пользователя для списания)
        - to (ID пользовавтеля для зачисления)
        - sum (Сумма платежа, вещественное положительное число)
    - Пример запроса
        > {"id": 1, "sum": 27.43, "to": 2}
        
    - Пример ответа
        > {"status":0,"data":"Transfer completed"}
* GET /transactions (История транзакций)
    - Обязательные
        - id (ID пользоавтеля)
    - Необязательные
        - sort (Сортировка, текст)
            - По умолчанию по дате
            - sum (По сумме транзакции)
            - date (По дате транзакции)
        - page (Страница, целое положительное число)
            - Без указания вывыдит все транзакции
        - from (Время в формате Unix timestamp) 
            - Выводит транзакции, произведенные после указанной даты
            - По умолчанию - 0
        - to (Время в формате Unix timestamp) 
            - Выводит транзакции, произведенные до указанной даты
            - По умолчанию - текущая дата
    - Пример запроса
        > {"id": 1, "sort": "sum", "page": 1, "from": 1637602965, "to": 1669138965}
        
    - Пример овтета
        > {"status":0,"data":[{"date":"2021-12-22T20:11:06Z","desc":"Test payout","operation":0,"sum":1000},{"date":"2021-12-22T21:07:34Z","desc":"Random income","operation":0,"sum":100}]}
        

### Структура
* server
    - содержит основной код контроллера, сервиса и репозитория
* test
    - содержит код для тестов